{"version":3,"file":"src_app_pages_users_customer_customer_module_ts.js","mappings":"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","sources":["./src/app/pages/users/customer/customer-routing.module.ts","./src/app/pages/users/customer/customer.module.ts","./src/app/pages/users/customer/customer.page.ts","./src/app/pages/users/customer/customer.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CustomerPage } from './customer.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CustomerPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CustomerPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CustomerPageRoutingModule } from './customer-routing.module';\r\n\r\nimport { CustomerPage } from './customer.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    CustomerPageRoutingModule\r\n  ],\r\n  declarations: [CustomerPage]\r\n})\r\nexport class CustomerPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { TokenStorageService } from '../../../services/tokenstorage.service';\r\nimport { Router } from '@angular/router';\r\nimport { getLocaleDateFormat, getLocaleTimeFormat } from '@angular/common';\r\nimport { AlertService } from 'src/app/services/alert.service';\r\n\r\n@Component({\r\n  selector: 'app-customer',\r\n  templateUrl: './customer.page.html',\r\n  styleUrls: ['./customer.page.scss'],\r\n})\r\nexport class CustomerPage implements OnInit {\r\n\r\n  name: string;\r\n  id: number;\r\n  customers:any;\r\n  customersData:any;\r\n\r\n  constructor(private tokenStorage: TokenStorageService, \r\n              private userService: UserService,\r\n              private alertService: AlertService, \r\n              private router: Router ) { }\r\n\r\n  ngOnInit() {\r\n    this.getUserData();\r\n    this.getUsers();\r\n  }\r\n\r\n  // getAnniversary() {\r\n  //   let date: Date = new Date('UTC');\r\n  //   let currentDay = date.getDay();\r\n  //   let currentMonth = date.getMonth();\r\n  //   // let currentDay = 14;\r\n  //   // let currentMonth = 8;\r\n  //   this.customers.forEach(customer => {\r\n  //     let customer_anniversary = customer.anniversary.split('-');\r\n  //     if((currentDay == customer_anniversary[2]) && (currentMonth == customer_anniversary[1])) {\r\n  //       this.alertService.presentToast(`Congratulations ${customer.first_name+' '+customer.last_name} has completed a year with us`, 'success');\r\n  //     }\r\n  //   });\r\n  // }\r\n\r\n  getUserData() {\r\n    let user = this.tokenStorage.DecodeToken();\r\n    this.name = user['username'];\r\n    this.id = user['user_id'];\r\n  }\r\n\r\n  async getUsers() {\r\n    await this.userService.getUsers(this.id).subscribe(\r\n      data => {\r\n        this.customers = data['customer']\r\n        // this.getAnniversary()\r\n      }\r\n    )\r\n  }\r\n\r\n  Search(value) {\r\n    value = value.toLowerCase();\r\n    if(value == '') {\r\n      this.getUsers();\r\n    }\r\n    let copyCustomers = this.customers;\r\n    this.customers = [];\r\n    copyCustomers.forEach(element => {\r\n      let name = (element['first_name']+' '+element['last_name']).toLowerCase();\r\n      if(name.indexOf(value)!=-1) {\r\n        this.customers.push(element)\r\n      }\r\n    });\r\n  }\r\n\r\n  onClear() {\r\n    this.getUsers()\r\n  }\r\n\r\n  select(customer) {\r\n    this.router.navigate(['/profile'])\r\n    this.userService.addCusomerToStorage(JSON.stringify(customer));\r\n  }\r\n  \r\n  add() {\r\n    this.router.navigateByUrl('/add-customer', {state:{id:this.id}})\r\n  }\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <div class=\\\"content\\\">\\r\\n      <ion-title>Customer</ion-title>\\r\\n      <!-- <ion-searchbar (ionClear)=\\\"onClear()\\\" (ionChange)=\\\"Search($event.target.value)\\\" animated></ion-searchbar> -->\\r\\n    </div>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"grid\\\">\\r\\n    <ion-card *ngFor=\\\"let customer of customers\\\" (click)=\\\"select(customer)\\\">\\r\\n      <ion-card-header>\\r\\n        <ion-card-title>\\r\\n          <ion-text>\\r\\n            {{customer.first_name}}\\r\\n          </ion-text>\\r\\n\\r\\n          <ion-text>\\r\\n            {{customer.last_name}}\\r\\n          </ion-text>\\r\\n        </ion-card-title>\\r\\n\\r\\n        <ion-avatar>\\r\\n          <img [src]=\\\"'data:image/png;base64,'+customer.image_name\\\">\\r\\n        </ion-avatar>\\r\\n      </ion-card-header>\\r\\n\\r\\n      <ion-card-content>\\r\\n        <ion-card-subtitle class=\\\"main-content\\\">\\r\\n          <span>Mostly Prefer: </span>\\r\\n          {{customer.service}}\\r\\n        </ion-card-subtitle>\\r\\n\\r\\n        <ion-text>{{customer.message}}</ion-text>\\r\\n      </ion-card-content>\\r\\n    </ion-card>\\r\\n  </div>\\r\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button>\\r\\n      <ion-icon name=\\\"add\\\" (click)=\\\"add()\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab>\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}