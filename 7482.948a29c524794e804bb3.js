"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7482],{7482:(A,m,r)=>{r.r(m),r.d(m,{ProfilePageModule:()=>T});var d=r(8583),u=r(665),o=r(3083),h=r(4433),c=r(3318),g=r(4762),e=r(639),p=r(3071),Z=r(5970);const f=["chart"],v=[{path:"",component:(()=>{class s{constructor(i,t,n){this.router=i,this.userService=t,this.alertService=n,this.Payment=[],this.Date=[],this.currentYear="2021"}ngOnInit(){this.getCustomer(),this.getGraphData(),this.getCurrentYear(),this.Chart(),this.Data()}getCustomer(){this.customer=JSON.parse(this.userService.getCustomerFromStorage()),this.last_visit=this.customer.last_visit,this.service=this.customer.service,this.payment=this.customer.payment}update(){this.last_visit.toString().split("-")[1]===this.customer.last_visit.split("-")[1]?this.userService.editProfile(this.customer.customer_data_id,this.customer.customer_id,this.service,this.payment,this.last_visit).subscribe(t=>(0,g.mG)(this,void 0,void 0,function*(){yield this.alertService.presentToast(t.msg,"success"),yield this.userService.addCusomerToStorage(JSON.stringify(t.customer))})):this.userService.updateProfile(this.customer.customer_id,this.service,this.payment,this.last_visit).subscribe(t=>(0,g.mG)(this,void 0,void 0,function*(){this.alertService.presentToast(t.msg,"success"),this.userService.addCusomerToStorage(JSON.stringify(t.customer))}))}getCurrentYear(){let i=new Date;this.currentYear=String(i.getFullYear())}getGraphData(){return(0,g.mG)(this,void 0,void 0,function*(){yield this.userService.getGraphData(this.customer.customer_id).subscribe(i=>{i.Payment.forEach(t=>{this.Payment.push(t)}),i.Date.forEach(t=>{this.Date.push(t)})})})}Data(){let i=0;for(i=0;i<this.Date.length;i++)console.log("Hello");return[]}Chart(){this.chartOptions={series:[{data:this.Payment}],chart:{height:360,type:"line",zoom:{enabled:!1},toolbar:{show:!1}},stroke:{curve:"smooth"},markers:{size:6,hover:{size:10}},fill:{colors:["#00E396"],opacity:.8},tooltip:{followCursor:!1,theme:"dark",marker:{show:!1},x:{show:!1},y:{title:{formatter:function(){return"\u20b9"}}}},xaxis:{title:{text:"Year "+this.currentYear},categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yaxis:{title:{text:"Money Spend"},labels:{minWidth:10},min:0,max:2e3,tickAmount:6}}}ngOnDestroy(){this.userService.remove("customer")}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(c.F0),e.Y36(p.K),e.Y36(Z.c))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-profile"]],viewQuery:function(i,t){if(1&i&&e.Gf(f,5),2&i){let n;e.iGM(n=e.CRH())&&(t.chart=n.first)}},decls:55,vars:21,consts:[["slot","start"],[1,"grid"],[3,"src"],[1,"wrapper"],["type","date","name","last_visit",3,"value","ngModel","ngModelChange"],["name","pencil-outline"],["type","text","name","service",3,"value","ngModel","ngModelChange"],["type","number","name","payment",3,"value","ngModel","ngModelChange"],["slot","end",3,"click"],[3,"series","chart","xaxis","yaxis","stroke","markers","tooltip","fill"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-buttons",0),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ion-content"),e.TgZ(7,"ion-card"),e.TgZ(8,"ion-card-content"),e.TgZ(9,"div",1),e.TgZ(10,"div"),e.TgZ(11,"ion-card"),e.TgZ(12,"ion-card-content"),e._UZ(13,"img",2),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",3),e.TgZ(15,"ion-item"),e.TgZ(16,"ion-label"),e._uU(17,"First Name:"),e.qZA(),e.TgZ(18,"ion-label"),e._uU(19),e.qZA(),e.qZA(),e.TgZ(20,"ion-item"),e.TgZ(21,"ion-label"),e._uU(22,"Last Name:"),e.qZA(),e.TgZ(23,"ion-label"),e._uU(24),e.qZA(),e.qZA(),e.TgZ(25,"ion-item"),e.TgZ(26,"ion-label"),e._uU(27,"Last Visit:"),e.qZA(),e.TgZ(28,"ion-input",4),e.NdJ("ngModelChange",function(l){return t.last_visit=l}),e.qZA(),e._UZ(29,"ion-icon",5),e.qZA(),e.TgZ(30,"ion-item"),e.TgZ(31,"ion-label"),e._uU(32,"Service:"),e.qZA(),e.TgZ(33,"ion-input",6),e.NdJ("ngModelChange",function(l){return t.service=l}),e.qZA(),e._UZ(34,"ion-icon",5),e.qZA(),e.TgZ(35,"ion-item"),e.TgZ(36,"ion-label"),e._uU(37,"Payment Status:"),e.qZA(),e.TgZ(38,"ion-input",7),e.NdJ("ngModelChange",function(l){return t.payment=l}),e.qZA(),e._UZ(39,"ion-icon",5),e.qZA(),e.TgZ(40,"ion-item"),e.TgZ(41,"ion-label"),e._uU(42,"Important Dates:"),e.qZA(),e.TgZ(43,"ion-label"),e._uU(44),e.qZA(),e.qZA(),e.TgZ(45,"ion-button",8),e.NdJ("click",function(){return t.update()}),e._uU(46,"Update"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"ion-item"),e.TgZ(48,"ion-label"),e._uU(49,"About Customer"),e.qZA(),e.TgZ(50,"ion-label"),e._uU(51),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"ion-card"),e.TgZ(53,"ion-card-content"),e._UZ(54,"apx-chart",9),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(5),e.AsE("",t.customer.first_name," ",t.customer.last_name,""),e.xp6(8),e.Q6J("src","data:image/png;base64,"+t.customer.image_name,e.LSH),e.xp6(6),e.Oqu(t.customer.first_name),e.xp6(5),e.Oqu(t.customer.last_name),e.xp6(4),e.s9C("value",t.customer.last_visit),e.Q6J("ngModel",t.last_visit),e.xp6(5),e.s9C("value",t.customer.service),e.Q6J("ngModel",t.service),e.xp6(5),e.s9C("value",t.customer.payment),e.Q6J("ngModel",t.payment),e.xp6(6),e.Oqu(t.customer.anniversary),e.xp6(7),e.Oqu(t.customer.message),e.xp6(3),e.Q6J("series",t.chartOptions.series)("chart",t.chartOptions.chart)("xaxis",t.chartOptions.xaxis)("yaxis",t.chartOptions.yaxis)("stroke",t.chartOptions.stroke)("markers",t.chartOptions.markers)("tooltip",t.chartOptions.tooltip)("fill",t.chartOptions.fill))},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,o.wd,o.W2,o.PM,o.FN,o.Ie,o.Q$,o.pK,o.j9,u.JJ,u.On,o.gu,o.as,o.YG,h.x],styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:.5fr 1fr}.grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-position:center;background-size:cover}.grid[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{text-align:center}"]}),s})()}];let P=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[c.Bz.forChild(v)],c.Bz]}),s})(),T=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[d.ez,u.u5,o.Pc,P,h.X]]}),s})()}}]);